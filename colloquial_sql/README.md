# ColloquialSQL - Translating natural, colloquial language into SQL queries to fetch data

**Stack:**
- Postgres sql database
- AWS
- HuggingFace
- OpenAI
- Large Language Models
- Fine Tuning
- Synthetic Data Generation
- API

# Function of the agent:
1. Recieve initial prompt from user - colloqiual
2. Modify the initial prompt to include information on:
- The database's table definitions
- The expected output with guidance on formatting
3. Run the modified prompt against the llm
4. Extract the llm's suggested SQL query from it's response
5. Query the database

## Project Workflow:

### 1. Establish agent with OpenAI gpt-4
1. Host a postgres sql database.
<br>Patient data was generated by gpt-4
2. Develop the agent
<br>Leverage the llm model to perform a tranlation task.
3. Generate a Dataset to fine tune the model
<br>Using OpenAI gpt-4 model to genrate synthetic data that will follow the formatting that works with the agent.
4. Fine-tuning (OpenAI model)
<br>Using the OpenAI gpt-4 model, functionality is not quite consistent. Attempt to improve performance by finetuning.
4. Evaluate (OpenAI model)
<br>Develop an evaluation method to test the capabilities of llms pre and post fine-tuning

### 2. Transfer to local model
Mistral 7B? 

5. Instantiate base model (local model)
6. Fine-tune base model (local model)
7. Evaluation (local model)

# Example: "what is the email of John Doe?"

## Output
1. MODIFIED_PROMPT: what is the email of John Doe? Use these TABLE_DEFINITIONS to satisfy the database query:

TABLE_DEFINITIONS

CREATE TABLE patients (
    id integer DEFAULT nextval('patients_patient_id_seq'::regclass) NOT NULL,
    email character varying NOT NULL,
    phone character varying,
    first_name character varying,
    last_name character varying
); Respond in the format found under TABLE_RESPONSE_FORMAT. Insert the relevant information within <>, don't include the <> symbols, keep the ---------.

TABLE_RESPONSE_FORMAT

<insert an explanation of the sql query as raw text here>
            ---------
<insert sql query exclusively as raw text here>
            
2. PROMPT_RESPONSE: This query selects the email of the patient named "John Doe"

            ---------
SELECT email FROM patients WHERE first_name = 'John' AND last_name = 'Doe'
            
3. RUN_SQL_QUERY: SELECT email FROM patients WHERE first_name = 'John' AND last_name = 'Doe'
-------- POSTGRES AI AGENT RESPONSE ---------
[('john.doe@gmail.com',)]