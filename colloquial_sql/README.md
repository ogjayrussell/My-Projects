# UNFINISHED - Translating natural, colloquial language into SQL queries to fetch data



### Stack:
- Postgres sql database
- AWS
- HuggingFace
- Large Language Models
- API

# Function of the agent:
1. recieve initial prompt from user - colloqiual
2. modify the initial prompt to include information on:
- the database's table definitions
- the expected output with guidance on formatting
3. run the modified prompt against the llm
4. extract the llm's suggested SQL query from it's response
5. query the database

## Model Workflow:
1. Host a postgres sql database.
Patient data was generated by gpt-4
2. Develop the agent
Using the OpenAI gpt-4 model, functionality is not quite consistent. Attempt to improve performance by finetuning an even smaller model locally.
3. Host local LLM on AWS
4. Instantiate base model
5. Generate a Dataset to fine tune the model
Using OpenAI gpt-4 model to genrate synthetic data that will follow the formatting that works with the agent.
6. Evaluation

# Example: "what is the email of John Doe?"

## Output
1. MODIFIED_PROMPT: what is the email of John Doe? Use these TABLE_DEFINITIONS to satisfy the database query:

TABLE_DEFINITIONS

CREATE TABLE patients (
    id integer DEFAULT nextval('patients_patient_id_seq'::regclass) NOT NULL,
    email character varying NOT NULL,
    phone character varying,
    first_name character varying,
    last_name character varying
); Respond in the format found under TABLE_RESPONSE_FORMAT. Insert the relevant information within <>, don't include the <> symbols, keep the ---------.

TABLE_RESPONSE_FORMAT

<insert an explanation of the sql query as raw text here>
            ---------
<insert sql query exclusively as raw text here>
            
2. PROMPT_RESPONSE: This query selects the email of the patient named "John Doe"

            ---------
SELECT email FROM patients WHERE first_name = 'John' AND last_name = 'Doe'
            
3. RUN_SQL_QUERY: SELECT email FROM patients WHERE first_name = 'John' AND last_name = 'Doe'
-------- POSTGRES AI AGENT RESPONSE ---------
[('john.doe@gmail.com',)]